<html lang='en'>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta charset='utf-8'>
<title>ESP Device Setup</title>
<link rel="stylesheet" type="text/css" href="style.css">

</head> 
<body>

<div class="tab">
  <button id='tab_config' class="tablinks" onclick="openTab(event, 'config')">Config</button>
  <button id='tab_file_manager' class="tablinks" onclick="openTab(event, 'file_manager')">File Manager</button>
	<button id='tab_system' class="tablinks" onclick="openTab(event, 'system')">System</button>
</div>

<div id="config" class="tabcontent">

	<fieldset id="field0" class='config'>
		<legend>MODULE</legend>
		<div>
			<label for="module">Module:</label>
			<input name='module' id='module' type='text' required=true/>
		</div>
	</fieldset>

	<fieldset id="field1" class='config'>
		<legend>NETWORK</legend>
		<div>
			<label for="ssid">SSID:</label>
			<input name='ssid' id='ssid' type='text' value='' />
		</div>
		<div>
			<label for="pass">Pass:</label>
			<input name='pass' id='pass' type='password' value='' />
			<input type="checkbox" onclick="toggleVis('pass')"></button>
		</div>
		<div>
			<label for="ip">Static IP:</label>
			<input name='ip' id='ip' type='text' value='' />
		</div>
		<div>
			<label for="gateway">Gateway:</label>
			<input name='gateway' id='gateway' type='text' value='' />
		</div>
		<div>
			<label for="apPass">AP Pass:</label>
			<input name='apPass' id='apPass' type='password' value='' />
			<input type="checkbox" onclick="toggleVis('apPass')"></button>
		</div>
		<div>
			<label for="otaPass">OTA Pass:</label>
			<input name='otaPass' id='otaPass' type='password' value='' />
			<input type="checkbox" onclick="toggleVis('otaPass')"></button>
		</div>
	</fieldset>

	<fieldset id="field2" class='config'>
		<legend>MQTT</legend>
		<div>
			<label for="mqttServer">Server:</label>
			<input name='mqttServer' id='mqttServer' type='text' value='' />
		</div>
		<div>
			<label for="mqttPort">Port:</label>
			<input name='mqttPort' id='mqttPort' type='text' value='' />
		</div>
		<div>
			<label for="mqttUser">User:</label>
			<input name='mqttUser' id='mqttUser' type='text' value='' />
		</div>
		<div>
			<label for="mqttPass">Pass:</label>
			<input name='mqttPass' id='mqttPass' type='password' value='' />
			<input type="checkbox" onclick="toggleVis('mqttPass')"></button>
		</div>
	</fieldset>

	<fieldset id="field3">
		<legend>SENSORS
			<input type="text" id='nsensors' value='0' size='2' disabled>
			<input type="button" value='+' id='add_sensor'>
		</legend>       
		<div id='sensors' class='sensors'></div>
	</fieldset>

	<div id='btndiv'>
		<button id='get_config' width="100">Get Config</button> <!-- do not use type='submit' as we use ajax -->
		<button id='set_config' width="100">Set Config</button>
		
		<hr>
		<label><b>Config Editor:</b></label>
		<!-- <button id='get_config_json' width="100">Get Config Json</button> -->
		<button id='set_config_json' width="100">Set Config Json</button>
		<div class="block_container">
			<textarea id="config_edit" rows="20" cols="45" spellcheck="false"></textarea>
		</div>
	</div>

</div>

<div id="file_manager" class="tabcontent">
	<!-- <button id='filelist' type='button' class='btn btn-primary' width="100">Filelist</button> -->
	<!-- <label for="upload">Upload >> </label> -->
	<!-- <input id='upload' type='file' class='btn btn-primary' width="100"> -->

	<fieldset>
		<legend><pre id='diskinfo'>Disk Info</pre></legend>
		<!-- <b>Used:</b><b>Max:</b> -->
		<div id="filelist"></div>
	</fieldset>

	<fieldset>
		<legend>File Upload</legend>

		<div>
			<label for="fileselect">Files to upload:</label>
			<input type="file" id="fileselect" name="fileselect[]" multiple="multiple" />
			<div id="filedrag">or drop files here</div>
		</div>

	</fieldset>

	<div id="progress"></div>

	<div id="messages">
	<p>Status Messages</p>
	</div>
</div>

<div id="system" class="tabcontent">
	<button id='restart' idth="100">Restart Device</button>
	<!-- <button id='reset_wifi' type='button' class='btn btn-primary' width="100">Reset Wifi</button> -->
	<!-- <a href="/update"> Firmware update </a> <br> -->
	<!-- https://stackoverflow.com/questions/16584237/how-to-get-height-100-on-object-embed -->
	<object type="text/html" data="/update" style="width:100%;height:50vh;"></object>
</div>

<fieldset>
	<legend>OUTPUT <button id="clear">Clear</button></legend>
	<div id="output"></div>
</fieldset>

<script src="espman.js"></script>
<script src="filedrag.js"></script>

</body>
</html>
